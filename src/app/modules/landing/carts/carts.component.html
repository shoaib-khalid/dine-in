<!-- Voucher List -->
<div class="relative flex flex-col items-center bg-card w-full h-full">
    <!-- Container -->
    <div class="flex flex-col md:flex-row w-full h-full">
        <!-- Carts -->
        <ng-container *ngIf="carts && (carts.length > 0); else noCarts">
            <!-- Store pickup info (MOBILE)  -->
            <ng-container *ngIf="false">
                <div class="md:hidden w-full flex flex-col justify-center items-start border rounded-lg p-2 mb-2">
                    <!-- Header -->
                    <div class="flex flex-row border-b justify-start items-center pb-2 w-full">
                        <mat-icon 
                            class="icon-size-5 text-primary" 
                            [svgIcon]="'mat_solid:contact_phone'"></mat-icon>
                        <span class="ml-2 font-bold">Contact Info</span>
                    </div>
                    <ng-container *ngIf="selfPickupInfo; else noSelfPickupInfo">
                        <div class="w-full flex flex-col rounded">
                            <div class="flex flex-row p-2 font-medium gap-1 items-center justify-between w-full">
                                <!-- Address  -->
                                <div class="flex flex-col font-medium gap-1">
                                    <span class="">{{selfPickupInfo.name}}</span>
                                    <span class="">{{selfPickupInfo.phoneNumber}}</span>
                                    <span class="">{{selfPickupInfo.email}}</span>
                                </div>
                            </div>
                            <!-- Button -->
                            <div class="flex w-full justify-center items-center">
                                <button 
                                    (click)="addRequiredInfo(0)"
                                    class="my-2 w-full bg-primary-500 active:bg-primary-600 rounded-md flex flex-row items-center justify-center p-1 duration-75"
                                >
                                    <mat-icon 
                                        class="icon-size-4 text-white" 
                                        [svgIcon]="'heroicons_solid:pencil'"></mat-icon>
                                    <span class="ml-1 font-semibold text-white">Edit</span>
                                </button>
                            </div>
                        </div>
                    </ng-container>
                    <ng-template #noSelfPickupInfo>
                        <!-- Enter contact info -->
                        <span class="flex mt-2 text-center">Add your contact info</span>
                        <!-- Button -->
                        <div class="flex w-full justify-center items-center mt-2">
                            <button 
                            (click)="addRequiredInfo()"
                                class="my-2 w-full bg-primary-500 active:bg-primary-600 rounded-md flex flex-row items-center justify-center p-1 duration-75"
                            >
                                <mat-icon 
                                    class="icon-size-5 text-white" 
                                    [svgIcon]="'heroicons_solid:plus'"></mat-icon>
                                <span class="ml-1 font-semibold text-white">Add</span>
                            </button>
                        </div>
                    </ng-template>
                </div>
            </ng-container>

            <!-- Carts Details -->
            <div class="flex flex-col w-full items-center">
                <div class="grid w-full">
                    <div class="flex flex-row items-center mb-2">
                        <button class="flex flex-row items-center rounded-lg border p-1" (click)="goBack()">
                            <mat-icon
                                class="icon-size-5"
                                [svgIcon]="'heroicons_solid:chevron-left'"></mat-icon>
                        </button>
                        <!-- Title -->
                        <span class="text-lg sm:text-3xl font-semibold ml-2">Your Cart</span>
                    </div>

                    <ng-container *ngIf="currentOrderIds.length < 1">
                        <div *ngIf="(countdownTimer$ | async) as timer" 
                            class="flex flex-row gap-1 w-full rounded border justify-center items-center mb-4 py-1"
                            [ngClass]="timer.minutesToDday < 3 ? 'bg-red-200' : 'bg-primary-300'">
                            <span class="text-sm text-black font-bold leading-none">Time out in:</span>
                            <!-- <span class="flex flex-row items-center font-bold  text-sm pl-1"
                                [ngClass]="countdown < 300 ? 'text-red-500 animate-pulse' : 'text-black animate-none'">
                                {{timer}}
                            </span> -->
                            <!-- <span class="flex flex-row items-center font-bold text-sm pl-1"
                                [ngClass]="timer.minutesToDday < 3 ? 'text-red-500 animate-pulse' : 'text-black animate-none'">
                                {{timer.minutesToDday}}:{{timer.secondsToDday}}
                            </span> -->
                            <div 
                                class="flex flex-row gap-1 text-sm items-center"
                                [ngClass]="timer.minutesToDday < 3 ? 'text-red-500 animate-pulse' : 'text-black animate-none'">
                                <div class="flex items-end leading-none gap-0.5">
                                    <span class="font-semibold">{{timer.minutesToDday > 0 ? timer.minutesToDday : 0}}</span>
                                    <span class="text-xs">min</span>
                                </div>
                                <div class="flex items-end leading-none gap-0.5">
                                    <span class="font-semibold">{{timer.secondsToDday > 0 ? timer.secondsToDday : 0}}</span>
                                    <span class="text-xs">sec</span>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                    
                    <!-- Header -->
                    <!-- <div class="lg:hidden cart-title-grid grid w-full pb-2 px-2 border border-white">
                        <div class="flex flex-col justify-start ml-2">
                            <span class="font-medium text-base tracking-tight">Product</span>
                        </div>
                    </div> -->
                    <div class="hidden lg:grid cart-grid w-full sticky py-2 border-b border-gray-600 tracking-tight">
                        <span class="font-semibold text-left ml-4">Product</span>
                        <span class="font-semibold text-center">Unit Price</span>
                        <span class="font-semibold text-center">Quantity</span>
                        <span class="font-semibold text-center">Total Price</span>
                        <span></span>
                    </div>
                    <ng-container *ngFor="let cart of carts; let i = index">
                        <div
                            class="relative w-full border lg:border-0 lg:border-b lg:last:border-b-0 lg:border-gray-600 rounded-lg lg:rounded-none pb-2 last:pb-0 mb-2 lg:mb-0">
                            <!-- Store timing bg-gradient-to-b from-black -->
                            <!-- <div *ngIf="isStoreClose(cart.storeId)" 
                                class="absolute bg-black bg-opacity-60 z-10 w-full h-full flex flex-col items-center justify-center rounded-lg lg:rounded gap-2">
                                <div class="flex flex-col rounded-lg bg-primary text-white items-center p-3 leading-none uppercase">
                                    <span class="text-white text-2xl font-medium">{{storesOpening[i].messageTitle}}</span>
                                    <span class="text-white text-5xl font-semibold">CLOSED</span>
                                </div>
                                <span class="w-3/4 text-center text-white text-md lg:text-lg font-medium tracking-tight">{{storesOpening[i].message}}</span>
                            </div> -->
                            <div class="px-2 lg:px-0">
                                <!-- Store timing MOBILE -->
                                <!-- <div *ngIf="isStoreClose(cart.storeId)" 
                                    class="lg:hidden px-1 flex flex-row justify-end items-center border-b h-14 lg:h-16 w-full">
                                    <div class="flex flex-row max-w-1/2 gap-x-1">
                                        <div class="flex flex-col rounded-md bg-red-500 text-white items-center p-2 leading-none uppercase">
                                            <span class="text-white text-xs font-medium tracking-tight">{{storesOpening[i].messageTitle}}</span>
                                            <span class="text-white text-xl font-semibold tracking-tighter">CLOSED</span>
                                        </div>
                                        <div class="flex items-center ml-1">
                                            <span class="text-black text-xs lg:text-sm font-medium tracking-tight leading-snug">{{storesOpening[i].message}}</span>
                                        </div>
                                    </div>
                                </div> -->
                                
                                <div 
                                    *ngIf="isStoreClose(cart.storeId)"
                                    class="w-full bg-black bg-opacity-50 absolute inset-0 h-14 rounded-t-lg lg:hidden">
                                </div>

                                <div 
                                    *ngIf="isStoreClose(cart.storeId)"
                                    class="bg-black bg-opacity-50 w-full rounded-b-lg absolute inset-0 top-14 z-10 lg:hidden">
                                    <div class="flex flex-col items-center justify-center w-full h-full gap-x-1">
                                        <div class="flex flex-col rounded-md bg-red-500 text-white items-center p-2 leading-none uppercase">
                                            <span class="text-white text-xs font-medium tracking-tight">{{storesOpening[i].messageTitle}}</span>
                                            <span class="text-white text-xl font-semibold tracking-tighter">CLOSED</span>
                                        </div>
                                        <div class="flex items-center ml-1">
                                            <span class="text-white text-md lg:text-sm font-medium tracking-tight leading-snug">{{storesOpening[i].message}}</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Cart Header -->
                                <div    
                                    class="cart-title-grid grid w-full sticky border-b h-14 lg:h-16 items-center">
                                    <div class="flex flex-col justify-start ml-2 md:ml-4">
                                        <div class="flex flex-row justify-between items-center">
                                            <div class="flex flex-col w-full">
                                                <span 
                                                    class="text-base sm:text-xl font-semibold hover:cursor-pointer max-w-2/3"
                                                    (click)="redirect('store', cart.store, null)">
                                                    {{cart.store.name}}
                                                </span>
                                                <div 
                                                [ngClass]="isStoreClose(cart.storeId) ? 'brightness-50 lg:brightness-100':''"
                                                    class="flex flex-row tracking-tight gap-1">
                                                    <span class="text-sm">Serving Method:</span>
                                                    <span *ngIf="cart.store.dineInOption === 'SENDTOTABLE'" class="text-sm font-medium text-primary">Send to table</span>
                                                    <span *ngIf="cart.store.dineInOption === 'SELFCOLLECT'" class="text-sm font-medium text-primary">Self collect</span>
                                                </div>
                                            </div>
                                            <div class="flex flex-row items-center gap-2">
                                                <!-- Store timing DESKTOP -->
                                                <div *ngIf="isStoreClose(cart.storeId)" 
                                                    class="hidden lg:flex flex-row items-center justify-center gap-2">
                                                    <div class="flex flex-col rounded-md bg-red-500 text-white items-center p-2 leading-none uppercase">
                                                        <span class="text-white text-[8px] lg:text-xs font-medium tracking-tight">{{storesOpening[i].messageTitle}}</span>
                                                        <span class="text-white text-[10px] lg:text-xl font-semibold tracking-tighter">CLOSED</span>
                                                    </div>
                                                    <span class="text-black text-xs lg:text-sm font-medium tracking-tight max-w-[200px]">{{storesOpening[i].message}}</span>
                                                </div>
                                                <!-- Required Info  -->
                                                <div *ngIf="selectedCart.carts[i + pagination.startIndex].showRequiredInfo && !selectedCart.carts[i + pagination.startIndex].disabled"
                                                    class="flex flex-col justify-center items-center text-center mr-1 md:mr-3">
                                                    <span class="flex tracking-tighter justify-center items-center text-xs md:text-sm">Required Info
                                                    </span>
                                                    <mat-icon 
                                                        *ngIf="validateCustomerInfo(i + pagination.startIndex)"
                                                        class="icon-size-5 md:icon-size-6 text-primary cursor-pointer" 
                                                        (click)="addRequiredInfo(i + pagination.startIndex)"
                                                        [svgIcon]="'heroicons_outline:check-circle'"></mat-icon>
                                                    <mat-icon 
                                                        *ngIf="!validateCustomerInfo(i + pagination.startIndex)"
                                                        class="icon-size-5 md:icon-size-6 text-red-500 cursor-pointer" 
                                                        (click)="addRequiredInfo(null)"
                                                        [svgIcon]="'heroicons_outline:exclamation-circle'"></mat-icon>
                                                </div>
                                                <!-- Remove Cart -->
                                                <div class="flex w-[24px] md:w-[20px] xl:w-[30px] justify-center">
                                                    <span class="flex justify-center items-center text-center p-1 cursor-pointer bg-stone-300 rounded">
                                                        <mat-icon 
                                                            [matTooltip]="'Delete cart'"
                                                            (click)="deleteCart(cart.id)"
                                                            class="icon-size-5"
                                                            [svgIcon]="'heroicons_solid:trash'"></mat-icon>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <span class="text-sm sm:text-sm text-secondary">Cart ID: {{cart.id}}</span> -->
                                        <!-- <span class="text-sm sm:text-sm text-secondary">Last Updated: {{cart.updated | date:'MMM dd, h:mm a'}}</span> -->
                                    </div>
                                </div>
                                <!-- Cart Items -->
                                <ng-container *ngIf="cart.cartItems && cart.cartItems.length; else noCartItem">
                                    <ng-container *ngFor="let cartItem of cart.cartItems; let j = index">
                                        <div class="w-full sticky mt-4" [ngClass]="currentScreenSize.includes('lg') ?  'cart-grid grid' : 'flex flex-row justify-between'">
                                            <!-- Image, Title, Variants -->
                                            <div class="flex flex-row grow items-center justify-start ml-2 md:ml-4">
                                                <img class="w-14 max-w-14 max-h-14 min-h-14 sm:w-18 sm:max-w-18 sm:h-18 sm:max-h-18 shadow rounded" [src]="cartItem.productAsset ? cartItem.productAsset.url : cartItem.productInventory.product.thumbnailUrl ? cartItem.productInventory.product.thumbnailUrl : displayStoreLogo(cart.store)">
                                                <div class="flex flex-col ml-2 items-start justify-start sm:justify-center gap-1">
                                                    <span class="text-md sm:text-md font-semibold line-clamp-2 hover:cursor-pointer leading-snug">{{cartItem.productName}}</span>
                                                    <div *ngIf="cartItem.productInventory.productInventoryItems.length > 0 || cartItem.cartSubItem.length > 0 || cartItem.cartItemAddOn.length > 0">
                                                        <!-- Display variants -->
                                                        <ng-container *ngIf="cartItem.productInventory.productInventoryItems.length > 0">
                                                            <div class="flex flex-wrap items-center gap-x-1">
                                                                <ng-container *ngFor="let variant of cartItem.productInventory.productInventoryItems; let isLast=last">
                                                                    <span class="truncate tracking-tight max-w-32 leading-tight text-xs lg:text-sm text-secondary">{{variant.productVariantAvailable.productVariant.name}}: {{variant.productVariantAvailable.value}}{{isLast ? '' : ', '}}</span>
                                                                </ng-container>
                                                            </div>
                                                        </ng-container>
                                                        <!-- Display Combo -->
                                                        <ng-container *ngIf="cartItem.cartSubItem.length > 0">
                                                            <div class="flex flex-wrap items-center gap-x-1">
                                                                <!-- <ng-container *ngFor="let combo of cartItem.cartSubItem; let isLast=last">
                                                                    <span class="truncate tracking-tight max-w-32 leading-tight text-xs lg:text-sm text-secondary">{{combo.productName}}{{isLast ? '' : ', '}}</span>
                                                                </ng-container> -->
                                                                <ng-container *ngFor="let combo of comboSubItemGrouping(cartItem.cartSubItem); let isLast=last">
                                                                    <span class="tracking-tight leading-tight text-xs lg:text-sm text-secondary">{{combo}}{{isLast ? '' : ', '}}</span>
                                                                </ng-container>
                                                            </div>
                                                        </ng-container>
                                                        <!-- Display AddOn -->
                                                        <ng-container *ngIf="cartItem.cartItemAddOn.length > 0">
                                                            <div class="flex flex-wrap items-center gap-x-1">
                                                                <ng-container *ngFor="let addon of cartItem.cartItemAddOn; let isLast=last">
                                                                    <ng-container *ngIf="addon.productAddOn && addon.productAddOn.addOnTemplateItem">
                                                                        <span class="truncate tracking-tight max-w-32 leading-tight text-xs lg:text-sm text-secondary">{{addon.productAddOn.addOnTemplateItem.name}}{{isLast ? '' : ', '}}</span>
                                                                    </ng-container>
                                                                </ng-container>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                    <!-- Display Special Instruction -->
                                                    <div *ngIf="cartItem.specialInstruction; else noSpecialInstruction" 
                                                        (click)="editCartItem(cart.id, cartItem)"
                                                        class="flex flex-row items-center cursor-pointer">
                                                        <!-- Edit Item -->
                                                        <mat-icon
                                                            class="icon-size-3 mr-0.5"
                                                            [svgIcon]="'feather:edit-3'"></mat-icon>
                                                        <span class="leading-tight tracking-tight text-xs md:text-sm text-secondary flex flex-wrap">Instruction: {{cartItem.specialInstruction}}</span>
                                                        <!-- <span class="leading-tight text-xs text-secondary flex flex-wrap">{{cartItem.specialInstruction}}</span> -->
                                                    </div>
                                                    <ng-template #noSpecialInstruction>
                                                        <span (click)="editCartItem(cart.id, cartItem)" class="leading-tight tracking-tight text-xs md:text-sm flex flex-wrap underline text-primary cursor-pointer">Add instruction (optional)</span>
                                                    </ng-template>
                                                    <!-- Quantity (mobile)-->
                                                    <div class="md:hidden flex flex-col justify-center items-center mt-0.5">
                                                        <!-- <div class="flex flex-row h-6 w-16 justify-center items-center rounded-md relative border border-primary">
                                                            <button (click)="checkQuantity(cart.id,cartItem,null,'decrement')" class="text-black hover:bg-primary h-full w-20 rounded-l-md cursor-pointer outline-none">
                                                                <span class="flex justify-center text-sm">−</span>
                                                            </button>
                                                                <input 
                                                                    matInput
                                                                    (change)="checkQuantity(cart.id,cartItem,$event.target.value)" 
                                                                    type="number" 
                                                                    class="pt-[0.1rem] focus:outline-none text-center w-full font-semibold text-xs text-black focus:text-black md:text-base cursor-default flex items-center outline-none" 
                                                                    name="custom-input-number-small" 
                                                                    [value]="cartItem.quantity"/>
                                                            <button (click)="checkQuantity(cart.id,cartItem,null,'increment')" class="text-black hover:bg-primary h-full w-20 rounded-r-md cursor-pointer">
                                                                <span class="flex justify-center text-sm">+</span>
                                                            </button>
                                                        </div> -->
                                                        <div class="flex flex-row h-6 w-16 rounded ring-1 ring-primary relative bg-white mt-0.5 touch-manipulation">
                                                            <button (click)="checkQuantity(cart.id,cartItem,null,'decrement'); $event.stopPropagation()" 
                                                                class="px-1 text-black duration-75 group active:bg-primary active:text-white cursor-pointer outline-none flex justify-between items-center">
                                                                <mat-icon 
                                                                    class="icon-size-4 text-black group-active:text-white duration-75" 
                                                                    [svgIcon]="'heroicons_solid:minus-sm'"></mat-icon>
                                                            </button>
                                                            <!-- <input 
                                                                [value]="cartItem.quantity" 
                                                                (change)="checkQuantity(cart.id,cartItem,$event.target.value)" 
                                                                type="number" 
                                                                class="focus:outline-none text-center w-full font-medium text-sm text-black focus:text-black md:text-md cursor-default flex items-center outline-none leading-none" 
                                                                name="custom-input-number-small"/> -->
                                                            <span 
                                                                class="justify-center text-center w-full font-medium text-sm text-black focus:text-black md:text-md cursor-default flex items-center" name="custom-input-number-small">
                                                                {{cartItem.quantity}}
                                                            </span>
                                                            <button (click)="checkQuantity(cart.id,cartItem,null,'increment'); $event.stopPropagation()" 
                                                                class="px-1 text-black group duration-75 active:bg-primary active:text-white cursor-pointer outline-none flex justify-between items-center">
                                                                <mat-icon 
                                                                    class="icon-size-4 text-black group-active:text-white duration-75" 
                                                                    [svgIcon]="'heroicons_solid:plus'"></mat-icon>
                                                            </button>
                                                        </div>
                                                        <ng-container *ngIf="cartItem.productInventory.product.allowOutOfStockPurchases === false">
                                                            <ng-container *ngIf="cartItem.productInventory.quantity <= 10 ">
                                                                <ng-container *ngIf="cartItem.productInventory.quantity > 1">
                                                                    <span class="text-xs text-red-500 sm:mt-0.5">{{cartItem.productInventory.quantity}} items left</span>
                                                                </ng-container>
                                                                <ng-container *ngIf="cartItem.productInventory.quantity <= 1">
                                                                    <span class="text-xs text-red-500 sm:mt-0.5">{{cartItem.productInventory.quantity}} item left</span>
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>
                                                    </div>

                                                </div>
                                            </div>
                                            <!-- Unit Price -->
                                            <div class="hidden sm:flex flex-col justify-center items-center text-center px-1">
                                                <ng-container *ngIf="cartItem.cartItemAddOn.length > 0; else noAddonPriceDesktop">
                                                    <span class="font-semibold text-sm md:text-md">
                                                    {{cartItem.totalPrice / cartItem.quantity | currency: cart.store.regionCountry.currencySymbol}}</span>

                                                </ng-container>
                                                <ng-template #noAddonPriceDesktop>
                                                    <span class="font-semibold text-sm md:text-md">
                                                        {{cartItem.productPrice | currency: cart.store.regionCountry.currencySymbol}}</span>
                                                </ng-template>
                                            </div>
                                            <!-- Quantity (desktop) -->
                                            <div class="hidden md:flex flex-col justify-center items-center mx-2">
                                                <!-- <div class="flex flex-row h-6 w-16 justify-center items-center rounded-md relative border border-primary">
                                                    <button (click)="checkQuantity(cart.id,cartItem,null,'decrement')" class="pb-[0.1rem] text-black hover:bg-primary h-full w-20 rounded-l-md cursor-pointer outline-none">
                                                        <span class="flex justify-center">−</span>
                                                    </button>
                                                        <input
                                                            (change)="checkQuantity(cart.id,cartItem,$event.target.value)" 
                                                            type="number" 
                                                            class="pt-[0.1rem] focus:outline-none text-center w-full font-semibold text-md text-black focus:text-black md:text-basecursor-default flex items-center outline-none" 
                                                            name="custom-input-number" 
                                                            [value]="cartItem.quantity"/>
                                                    <button (click)="checkQuantity(cart.id,cartItem,null,'increment')" class="pb-[0.1rem] text-black hover:bg-primary h-full w-20 rounded-r-md cursor-pointer">
                                                        <span class="flex justify-center">+</span>
                                                    </button>
                                                </div> -->
                                                <div class="flex flex-row h-6 w-16 rounded ring-1 ring-primary relative bg-white touch-manipulation">
                                                    <button (click)="checkQuantity(cart.id,cartItem,null,'decrement'); $event.stopPropagation()" 
                                                        class="px-1 text-black duration-75 group active:bg-primary active:text-white cursor-pointer outline-none flex justify-between items-center">
                                                        <mat-icon 
                                                            class="icon-size-4 text-black group-active:text-white duration-75" 
                                                            [svgIcon]="'heroicons_solid:minus-sm'"></mat-icon>
                                                    </button>
                                                    <!-- <input 
                                                        [value]="cartItem.quantity" 
                                                        (change)="checkQuantity(cart.id,cartItem,$event.target.value)" 
                                                        type="number" 
                                                        class="focus:outline-none text-center w-full font-medium text-sm text-black focus:text-black md:text-md cursor-default flex items-center outline-none leading-none" 
                                                        name="custom-input-number"/> -->
                                                    <span 
                                                        class="justify-center text-center w-full font-medium text-sm text-black focus:text-black md:text-md cursor-default flex items-center" name="custom-input-number">
                                                        {{cartItem.quantity}}
                                                    </span>
                                                    <button (click)="checkQuantity(cart.id,cartItem,null,'increment'); $event.stopPropagation()" 
                                                        class="px-1 text-black duration-75 group active:bg-primary active:text-white cursor-pointer outline-none flex justify-between items-center">
                                                        <mat-icon 
                                                            class="icon-size-4 text-black group-active:text-white duration-75" 
                                                            [svgIcon]="'heroicons_solid:plus'"></mat-icon>
                                                    </button>
                                                </div>
                                                <ng-container *ngIf="cartItem.productInventory.product.allowOutOfStockPurchases === false">
                                                    <ng-container *ngIf="cartItem.productInventory.quantity <= 10 ">
                                                        <ng-container *ngIf="cartItem.productInventory.quantity > 1">
                                                            <span class="text-xs text-red-500 sm:mt-0.5">{{cartItem.productInventory.quantity}} items left</span>
                                                        </ng-container>
                                                        <ng-container *ngIf="cartItem.productInventory.quantity <= 1">
                                                            <span class="text-xs text-red-500 sm:mt-0.5">{{cartItem.productInventory.quantity}} item left</span>
                                                        </ng-container>
                                                    </ng-container>
                                                </ng-container>
                                            </div>
                                            <!-- Total Price -->
                                            <span class="hidden sm:flex justify-center items-center font-semibold text-center text-sm md:text-md min-w-20 max-w-auto truncate">{{ cartItem.cartItemAddOn.length > 0 ? (cartItem.totalPrice | currency: cart.store.regionCountry.currencySymbol) : 
                                                (cartItem.price | currency: cart.store.regionCountry.currencySymbol)}}</span>
                                            <!-- Edit / Delete cart for desktop -->
                                            <div class="hidden sm:flex flex-row justify-end gap-2.5">
                                                <span class="flex justify-center items-center text-center cursor-pointer">
                                                    <mat-icon 
                                                        (click)="openDrawerToEdit(cart, cartItem)"
                                                        class="icon-size-5" 
                                                        [svgIcon]="'feather:edit-3'"></mat-icon>
                                                </span>
                                                <!-- Remove Item -->
                                                <span class="flex justify-center items-center text-center cursor-pointer">
                                                    <mat-icon 
                                                        [matTooltip]="'Delete item'"
                                                        (click)="deleteCartItem(cart.id, cartItem)"
                                                        class="icon-size-5"
                                                        [svgIcon]="'heroicons_solid:trash'"></mat-icon>
                                                </span>
                                            </div>
                                            <!-- Total Price , Unit Price , Remove button for sm-->
                                            <div class="flex flex-col sm:hidden items-end justify-between">
                                                <!-- Edit / Delete cart for mobile -->
                                                <div class="flex flex-row justify-end w-full gap-2.5">
                                                    <span class="flex justify-center items-center text-center cursor-pointer">
                                                        <mat-icon 
                                                            (click)="openDrawerToEdit(cart, cartItem)"
                                                            class="icon-size-5" 
                                                            [svgIcon]="'feather:edit-3'"></mat-icon>
                                                    </span>

                                                    <!-- Remove Item -->
                                                    <span class="flex justify-center items-center text-center cursor-pointer">
                                                        <mat-icon
                                                            [matTooltip]="'Delete item'"
                                                            (click)="deleteCartItem(cart.id, cartItem)" 
                                                            class="icon-size-5"
                                                            [svgIcon]="'heroicons_solid:trash'"></mat-icon>
                                                    </span>
                                                </div>
                                                <div class="flex flex-col w-26 justify-end items-end">
                                                    <!-- Unit Price -->
                                                    <div class="flex flex-col justify-center items-end text-center px-1">
                                                        <ng-container *ngIf="cartItem.cartItemAddOn.length > 0; else noAddonPrice">
                                                            <span class="text-sm md:text-xs">
                                                            {{cartItem.quantity}} x {{cartItem.totalPrice / cartItem.quantity | currency: cart.store.regionCountry.currencySymbol}}</span>

                                                        </ng-container>
                                                        <ng-template #noAddonPrice>
                                                            <span class="text-sm md:text-xs">
                                                                {{cartItem.quantity}} x {{cartItem.productPrice | currency: cart.store.regionCountry.currencySymbol}}</span>
    
                                                        </ng-template>
                                                    </div>
                                                    <!-- Total Price -->
                                                    <span class="flex justify-center items-center font-semibold text-center text-sm md:text-md px-1">
                                                        {{ cartItem.cartItemAddOn.length > 0 ? (cartItem.totalPrice | currency: cart.store.regionCountry.currencySymbol) : 
                                                        (cartItem.price | currency: cart.store.regionCountry.currencySymbol)}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                    <!-- Additional Info -->
                                    <div class="flex flex-col mt-4">
                                        <!-- <span class="text-secondary">Additional Information</span>
                                        <div class="w-full flex flex-row text-center items-center my-2 text-sm"> 
                                            <span class="mr-2">Order Notes (Optional)</span>
                                            <span  *ngIf="selectedCart && selectedCart.carts[i + pagination.startIndex].description.isOpen === true" (click)="close(cart.id)" class="text-primary cursor-pointer">Insert Order Notes</span>
                                            <span *ngIf="selectedCart && selectedCart.carts[i + pagination.startIndex].description.isOpen === false" (click)="open(cart.id)" class="text-primary cursor-pointer">Cancel</span>
                                        </div> -->

                                        <!-- <mat-form-field *ngIf="selectedCart && selectedCart.carts[i + pagination.startIndex].description.isOpen === false"
                                        @zoomIn @zoomOut class="w-full mt-2" floatLabel="always">
                                            <textarea
                                                matInput
                                                [(ngModel)] ="selectedCart.carts[i + pagination.startIndex].description.value"
                                                placeholder="Tell us when you prefer this order to be delivered or any special request you may have"
                                                [rows]="full"
                                                maxlength="100"
                                                class="h-5 text-sm"
                                                autocomplete="disabled"
                                                matTextareaAutosize></textarea>
                                        </mat-form-field> -->
                                    </div>
                                    <!-- Store Address for self pickup  -->
                                    <ng-container *ngIf="selectedCart.carts[i + pagination.startIndex].isSelfCollect">
                                        <div class="flex flex-col gap-1 w-full mt-1">
                                            <div class="rounded border w-full flex flex-col p-3 gap-1 bg-primary-100">
                                                <div class="flex flex-row items-center gap-2">
                                                    <mat-icon 
                                                        class="icon-size-5 text-primary" 
                                                        [svgIcon]="'mat_solid:storefront'"></mat-icon>
                                                    <span class="font-medium text-base">Store Address</span>
                                                </div>
                                                <div class="flex flex-row font-base gap-1 items-center justify-between w-full">
                                                    <!-- Address  -->
                                                    <div class="flex flex-col text-sm gap-1">
                                                        <span class="">{{cart.store.name}}</span>
                                                        <span class="">{{cart.store.phoneNumber}}</span>
                                                        <span class="">{{cart.store.address}}, {{cart.store.postcode}}, {{cart.store.city}}, {{cart.store.regionCountryStateId}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </ng-container>
                                <ng-template #noCartItem>
                                    <!-- Main -->
                                    <div class="relative flex justify-center items-center w-full h-full md:h-96">
                                        <error-background class="absolute z-0 inset-0 w-full opacity-50"></error-background>
                                        <div class="flex flex-col w-full h-full items-center justify-center z-10">
                                            <span class="mt-2 text-4xl md:text-5xl font-semibold tracking-tight leading-tight md:leading-none text-center">Cart is empty!</span>
                                            <span class="mt-4 max-w-120 text-lg md:text-xl font-medium tracking-tight text-center text-secondary">Shop now at {{cart.store.name}}</span>
                                        </div>
                                    </div>
                                </ng-template>
                            </div>
                        </div>
                    </ng-container>
                </div>
                <!-- Pagination -->
                <pagination 
                    *ngIf="pagination.length > pagination.size"
                    class="mt-4"
                    [itemLength]="pagination.length" 
                    [initialPage]="pagination.page + 1"
                    [pageSize]="pagination.size"
                    (click)="scrollToTop()"
                    (changePage)="onChangePage($event)"></pagination>
            </div>

            <!-- Cart Summary -->
            <div *ngIf="platform" class="flex flex-col w-full md:w-140 md:ml-6 md:mt-8 mt-2">
                <!-- Cart Summary -->
                <div class="flex flex-col border rounded-lg p-2">
                    <!-- Header -->
                    <div class="flex flex-row border-b justify-between items-center pb-2 w-full">
                        <div class="flex flex-row items-center">
                            <mat-icon 
                                class="text-primary" 
                                [svgIcon]="'mat_solid:add_shopping_cart'"></mat-icon>
                            <span class="ml-2 font-semibold leading-none">Cart Summary</span>
                        </div>
                        <div class="flex flex-col text-center">
                            <span class="font-semibold mb-0.5">Table No.:&nbsp;{{tableNumber}}</span>
                            <span class="leading-none text-gray-500 text-xs">
                                {{(tagType && tagType === 'restaurant' && (tableNumber.length === 0 || !tableNumber.trim())) ? 'Gotten your seat?' : 'Wrong table no.?'}}</span>
                            <div class="flex justify-center leading-snug gap-1">
                                <span class="text-gray-500 text-xs">
                                    {{(tagType && tagType === 'restaurant' && (tableNumber.length === 0 || !tableNumber.trim())) ? 'Enter table no. ' : 'Change '}}</span>
                                <span (click)="changeTableNumber()" class="text-primary text-xs underline cursor-pointer">
                                    here</span>
                            </div>
                        </div>
                    </div>
                    <!-- Summary -->
                    <!-- Sub Total -->
                    <!-- <div class="flex flex-row justify-between mt-2">
                        <span class="text-md text-secondary">Sub Total 
                            <small>(Qty:{{totalQuantity}})</small>
                        </span>
                        <span class="text-md font-semibold">{{paymentDetails.cartSubTotal | currency: platform.currency}}</span>
                    </div> -->
                    <!-- Order Discount -->
                    <ng-container *ngIf="paymentDetails.subTotalDiscount !== 0">
                        <div class="flex flex-row w-full justify-between mt-2">
                            <div class="flex flex-col">
                                <div class="text-md text-secondary">
                                    <span>Order Discount</span>
                                    <span *ngIf="paymentDetails.subTotalDiscountDescription">&nbsp;({{paymentDetails.subTotalDiscountDescription}})</span>
                                </div>
                                <span class="text-xs text-gray-500" *ngIf="paymentDetails.discountMaxAmount && paymentDetails.discountMaxAmount != 0 && paymentDetails.subTotalDiscount >= paymentDetails.discountMaxAmount && paymentDetails.subTotalDiscount != 0">
                                    Capped at {{paymentDetails.discountMaxAmount | currency: platform.currency }}
                                </span>
                            </div>
                            <span class="text-md font-semibold">-{{paymentDetails.subTotalDiscount | currency: platform.currency}}</span>
                        </div>
                    </ng-container>
                    <!-- Service Charges -->
                    <ng-container *ngIf="paymentDetails.storeServiceCharge !== 0">
                        <div class="flex flex-row justify-between mt-2">
                            <span class="text-md text-secondary">Service Charge</span> 
                            <span class="text-md font-semibold">{{paymentDetails.storeServiceCharge | currency: platform.currency}}</span>
                        </div>
                    </ng-container>
                    <!-- Delivery Fee -->
                    <!-- <div class="flex flex-row justify-between mt-2">
                        <span class="text-md text-secondary">Delivery Fee</span>
                        <span class="text-md font-semibold">{{paymentDetails.deliveryCharges | currency: platform.currency}}</span>
                    </div> -->
                    <!-- Delivery Discount -->
                    <!-- <ng-container *ngIf="paymentDetails.deliveryDiscount !== 0">
                        <div class="flex flex-row w-full justify-between py-1">
                            <div class="flex flex-col">
                                <div class="text-md text-secondary mt-2">
                                    <span>Delivery Discount</span>
                                    <span *ngIf="paymentDetails.deliveryDiscountDescription">&nbsp;({{paymentDetails.deliveryDiscountDescription}})</span>
                                </div>
                                <span class="text-xs text-gray-500" *ngIf="paymentDetails.deliveryDiscountMaxAmount != 0 && paymentDetails.deliveryDiscount >= paymentDetails.deliveryDiscountMaxAmount && paymentDetails.deliveryDiscount != 0">
                                    Capped at {{paymentDetails.deliveryDiscountMaxAmount | currency: platform.currency }}
                                </span>
                            </div>
                            <span class="font-semibold">-{{paymentDetails.deliveryDiscount | currency: platform.currency}}</span>
                        </div>
                    </ng-container> -->

                    <ng-container *ngIf="paymentDetails.deliveryDiscount !== 0">
                        <div class="flex flex-row justify-between mt-2">
                            <span class="text-md text-secondary">Delivery Fee Discount</span>
                            <span class="text-md font-semibold">-{{paymentDetails.deliveryDiscount | currency: platform.currency}}</span>
                        </div>
                    </ng-container>

                    <div *ngIf="paymentDetails.platformVoucherDeliveryDiscount && paymentDetails.platformVoucherDeliveryDiscount !== 0" class="flex flex-row justify-between mt-2">
                        <span class="text-md text-secondary">Deliverin Shipping Discount</span>
                        <span class="text-md font-semibold">-{{paymentDetails.platformVoucherDeliveryDiscount | currency: platform.currency}}</span>
                    </div>
                    
                    <div *ngIf="paymentDetails.platformVoucherSubTotalDiscount && paymentDetails.platformVoucherSubTotalDiscount !== 0" class="flex flex-row justify-between mt-2">
                        <span class="text-md text-secondary">Deliverin Promo Code/Voucher</span>
                        <span class="text-md font-semibold">-{{paymentDetails.platformVoucherSubTotalDiscount | currency: platform.currency}}</span>
                    </div>

                    <ng-container *ngIf="false">
                        <!-- Separator -->
                        <div class="border-b w-full my-1"></div>
    
                        <ng-container *ngIf="customerId; else guestVoucher">
                            <!-- Voucher Dropdown -->
                            <ng-container *ngIf="customerVouchers && customerVouchers.length > 0">
                                <mat-form-field class="fuse-mat-no-subscript fuse-mat-dense w-full my-1 text-sm" floatLabel="always">
                                    <mat-select 
                                        placeholder="Select My Voucher"
                                        (selectionChange)="selectVoucher(voucherSelector.value);"
                                        [(ngModel)]="voucherApplied"
                                        [ngModelOptions]="{standalone: true}"
                                        #voucherSelector="matSelect">
                                        <mat-select-trigger>
                                            <span class="flex items-center">
                                                <span>{{ voucherSelector.triggerValue }}</span>
                                            </span>
                                        </mat-select-trigger>
                                        <div *ngFor="let voucher of customerVouchers">
                                            <ng-container *ngIf="(voucher.voucher.voucherType === 'PLATFORM' ) && validateVoucher(voucher)">
                                                <mat-option [value]="voucher">{{voucher.voucher.name}}</mat-option>
                                            </ng-container>
                                        </div>
                                    </mat-select>
                                    <button
                                        mat-icon-button
                                        type="button"
                                        *ngIf="voucherApplied"
                                        (click)="deselectVoucher(); $event.stopPropagation()"
                                        matSuffix>
                                        <mat-icon
                                            class="text-gray-500 icon-size-4 ml-2"
                                            [svgIcon]="'heroicons_solid:trash'"></mat-icon>
                                    </button>                                              
                                </mat-form-field>
                            </ng-container>
        
                            <!-- Voucher Input -->
                            <ng-container *ngIf="displayRedeem; else displayHavePromo">
                                <mat-form-field class="w-full mt-1 fuse-mat-no-subscript fuse-mat-dense text-sm" floatLabel="always">
                                    <input
                                        matInput
                                        placeholder="Enter Promo Code"
                                        autocomplete="disabled"
                                        [(ngModel)]="promoCode"
                                        [ngModelOptions]="{standalone: true}"
                                        >
                                        <button class="bg-primary py-2 px-4 rounded text-white"
                                        [disabled]="isLoading" 
                                        [ngClass]="isLoading ? 'cursor-wait bg-gray-200' : 'bg-primary-500 active:bg-primary-600 duration-75'"
                                        (click)="claimPromoCode(); $event.preventDefault()">
                                            Apply
                                        </button>
                                </mat-form-field>
                            </ng-container>
    
                            <ng-template #displayHavePromo>
                                <div class="text-xs mt-1">
                                    <span>Having a Promo Code? Redeem </span>
                                    <span class="underline cursor-pointer text-primary" 
                                        (click)="displayRedeem = true">
                                    here
                                    </span>
                                </div>
                            </ng-template>
    
                        </ng-container>
    
                        <ng-template #guestVoucher>
                            <!-- Voucher Dropdown -->
                            <ng-container *ngIf="guestVouchers">
                                <mat-form-field class="fuse-mat-no-subscript fuse-mat-dense w-full mt-1 text-sm" floatLabel="always">
                                    <input
                                    matInput
                                    readonly
                                    [(ngModel)]="guestVouchers.voucher.name"
                                    [ngModelOptions]="{standalone: true}"
                                    >
                                    <button
                                        mat-icon-button
                                        type="button"
                                        *ngIf="voucherApplied"
                                        (click)="deselectVoucher(); $event.stopPropagation()"
                                        matSuffix>
                                        <mat-icon
                                            class="text-gray-500 icon-size-4 ml-2"
                                            [svgIcon]="'heroicons_solid:trash'"></mat-icon>
                                    </button>                                              
                                </mat-form-field>
                            </ng-container>
        
                            <!-- Voucher Input -->
                            <ng-container *ngIf="guestVouchers === null">
                                <ng-container *ngIf="true; else displayHavePromo">
                                    <mat-form-field class="w-full mt-1 fuse-mat-no-subscript fuse-mat-dense text-sm" floatLabel="always">
                                        <input
                                            matInput
                                            placeholder="Enter Promo Code"
                                            autocomplete="disabled"
                                            [(ngModel)]="promoCode"
                                            [ngModelOptions]="{standalone: true}"
                                            >
                                            <button class="bg-primary py-2 px-4 rounded text-white"
                                            [disabled]="isLoading" 
                                            [ngClass]="isLoading ? 'cursor-wait bg-gray-200' : 'bg-primary-500 active:bg-primary-600 duration-75'"
                                            (click)="claimPromoCode(); $event.preventDefault()">
                                                Apply
                                            </button>
                                    </mat-form-field>
                                </ng-container>
        
                                <ng-template #displayHavePromo>
                                    <div class="text-xs mt-1">
                                        <span>Having a Promo Code? Redeem </span>
                                        <span class="underline cursor-pointer text-primary" 
                                            (click)="displayRedeem = true">
                                        here
                                        </span>
                                    </div>
                                </ng-template>
                            </ng-container>
        
                        </ng-template>

                    </ng-container>

                    <!-- Separator -->
                    <!-- <div class="w-full my-1"></div> -->

                    <!-- Grand Total -->
                    <div class="flex flex-row justify-between mt-2 leading-tight">
                        <div class="flex flex-col">
                            <span class="text-md text-secondary">Grand Total</span>
                            <span class="text-xs text-red-500 tracking-tight">(Excluding Service Charge & SST)</span>
                        </div>
                        <span class="text-md font-semibold">{{paymentDetails.cartGrandTotal | currency: platform.currency}}</span>
                    </div>

                </div>
                <div class="w-full flex flex-col border rounded-lg p-2 mt-4">
                    <div class="flex flex-row items-center pb-2 border-b">
                        <mat-icon class="text-primary" svgIcon="mat_outline:account_balance_wallet"></mat-icon>
                        <span class="font-semibold ml-2 leading-none">Payment Method</span>
                    </div>
                    <mat-radio-group
                        class="flex flex-col mt-1"
                        [(ngModel)]="paymentMethod"
                        [color]="'primary'">
                        <mat-radio-button
                            class="m-1 tracking-tight"
                            [value]="'CASH'">
                            Cash
                        </mat-radio-button>
                        <!-- {{ enableOnlinePayment ? 'Cash' : 'Pay at Counter'}} -->
                        <!-- <mat-radio-button
                            *ngIf="enableOnlinePayment"
                            class="m-1 tracking-tight"
                            [value]="'ONLINE'">
                            Online Payment
                        </mat-radio-button> -->
                    </mat-radio-group>
                    <!-- Checkout -->
                    <button 
                        (click)="goToCheckout()"
                        [disabled]="isLoading || isGettingDeliveryPrices || placingOrder"
                        class="py-2 px-4 rounded w-full mt-2 text-white flex items-center justify-center text-center leading-tight active:bg-primary-600 active:text-black duration-75"
                        [ngClass]="{ 'cursor-wait bg-gray-400' : isLoading, 
                                     'cursor-pointer bg-primary' : !isLoading || !isPristine,
                                     'cursor-not-allowed bg-gray-400' : isPristine}">
                        <svg *ngIf="placingOrder" class="inline mr-2 w-4 h-4 text-gray-200 animate-spin dark:text-gray-600 fill-white" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/>
                            <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"/>
                        </svg>
                        {{placingOrder ? 'Placing Your Order...' : 'Place Order'}}
                    </button>
                </div>
                <!-- Store Address (md) -->
                <ng-container *ngIf="false">
                    <div class="flex flex-col justify-center items-center border rounded-lg p-2 mt-4">
                        <!-- Header -->
                        <div class="flex flex-row border-b justify-start items-center pb-2 w-full">
                            <mat-icon 
                                class="icon-size-5 text-primary" 
                                [svgIcon]="'mat_outline:storefront'"></mat-icon>
                            <span *ngIf="storesAddresses.length === 1" class="ml-2 font-bold">Store for Self Collect</span>
                            <span *ngIf="storesAddresses.length > 1" class="ml-2 font-bold">Stores for Self Collect</span>
                        </div>
                        <ng-container *ngFor="let storeAddress of storesAddresses">
                            <fuse-card class="rounded mt-2 w-full">
                                <div class="flex flex-row p-2 font-medium gap-1 items-center justify-between w-full">
                                    <!-- Address  -->
                                    <div class="flex flex-col font-medium gap-1 p-1">
                                        <span class="">{{storeAddress.storeName}}</span>
                                        <span class="">{{storeAddress.phoneNumber}}</span>
                                        <span class="">{{storeAddress.address}}, {{storeAddress.postCode}}, {{storeAddress.city}}, {{storeAddress.state}}</span>
                                    </div>
                                    <!-- Address  -->
                                    <!-- <div class="flex flex-col font-medium gap-1">
                                        <mat-icon 
                                            [matTooltip]="storeAddress.address + ', ' + storeAddress.postCode + ', ' + storeAddress.city + ', ' + storeAddress.state"
                                            class="icon-size-5 text-primary" 
                                            [svgIcon]="'mat_solid:location_on'"></mat-icon>
                                    </div> -->
                                </div>
                            </fuse-card>
                        </ng-container>
                    </div>
                </ng-container>
            </div>
        </ng-container>
        
        <!-- No Carts -->
        <ng-template #noCarts>
            <!-- Main -->
            <div class="relative flex justify-center items-center w-full h-full md:h-96">
                <error-background class="absolute z-0 inset-0 w-full opacity-50"></error-background>
                <div class="flex flex-col w-full h-full items-center justify-center z-10">
                    <span class="mt-2 text-4xl md:text-5xl font-semibold tracking-tight leading-tight md:leading-none text-center">Cart is empty!</span>
                    <span class="mt-4 max-w-120 text-lg md:text-xl font-medium tracking-tight text-center text-secondary">Order your food now</span>
                </div>
            </div>
        </ng-template>
        <div *ngIf="false" class="absolute inset-0 backdrop-blur-[2px] bg-white/30 z-50">
            <!-- <div class="text-center justify-center flex w-full h-full items-center">
                <svg class="inline w-20 h-20 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/>
                    <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"/>
                </svg>
            </div> -->
            <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
        </div>
    </div>
</div>

<floating-store-list [displayFloating]="displayFloating"></floating-store-list>